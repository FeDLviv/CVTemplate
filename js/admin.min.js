$(function(){function t(t,a){a.preventDefault();var e=t.closest("form").attr("action");e=e.substr(0,e.lastIndexOf("/"))+"/ajax_delete_file";var d={name:t.attr("id").substring(3)};$.post(e,d,function(a){1==a&&t.attr("disabled",!0),$("#modalText").text(a?"File is deleted":"File can not delete"),$("#modalDialog").modal("show")})}function a(t){return""==$.trim(t)?"This field is required":$.trim(t).length>100?"The maximum length is 100 characters":void 0}function e(t){var a=/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/;if(!a.test(t)||isNaN(Date.parse(t)))return"Please enter the date in the format YYYY-MM-DD"}function d(t){var a=/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/;if(""!==$.trim(t)&&(!a.test(t)||isNaN(Date.parse(t))))return"Please enter the date in the format YYYY-MM-DD"}function i(t){var a=t.closest("tr"),e=a.find("td:first").text(),d=t.closest("table").attr("id").substring(3).toLowerCase();$.post(t.attr("data-url"),{id:e,table:d},function(t){t&&a.remove(),$("#modalText").text(t?"Delete":"Error"),$("#modalDialog").modal("show")})}function n(){$(".education-ediatble-req").editable({params:function(t){return t.table="education",t},validate:a}),$(".education-ediatble-not-req").editable({params:function(t){return t.table="education",t},validate:o}),$(".education-ediatble-date-req").editable({params:function(t){return t.table="education",t},validate:e}),$(".education-ediatble-date-not-req").editable({params:function(t){return t.table="education",t},validate:d})}function o(t){if($.trim(t).length>100)return"The maximum length is 100 characters"}function l(){$(".work-ediatble-req").editable({params:function(t){return t.table="work",t},validate:a}),$(".work-ediatble-date-req").editable({params:function(t){return t.table="work",t},validate:e}),$(".work-ediatble-date-not-req").editable({params:function(t){return t.table="work",t},validate:d})}function r(){$(".skill-ediatble").editable({params:function(t){return t.table="skill",t},validate:a})}function s(){$(".language-ediatble").editable({params:function(t){return t.table="language",t},validate:a})}$("#menu-toggle").on("click",function(t){t.preventDefault();var a=$("#wrapper").hasClass("active")?0:180;$("#wrapper").toggleClass("active"),$(this).find("i").stop(!0,!0).animate({borderSpacing:a},{step:function(t,a){$(this).css("-webkit-transform","rotate("+t+"deg)"),$(this).css("-moz-transform","rotate("+t+"deg)"),$(this).css("transform","rotate("+t+"deg)")},duration:300},"ease")}),$("#formSettings").on("submit",function(t){t.preventDefault();var a=$(this);$.ajax({url:a.attr("action"),type:a.attr("method"),data:new FormData(this),contentType:!1,processData:!1,success:function(t){var e=$.parseJSON(t);if(null!==e.html)a[0].reset();else{var d=a.find('input[name="Head"]').val().trim();$("#linkSite").find("a").html('<i class="fa fa-home fa-lg" aria-hidden="true"></i>&nbsp;'+d+"</i>"),$("#butCV_path").attr("disabled",!e.cv),$("#butPhoto_path").attr("disabled",!e.photo)}$("#modalError").html(e.html),$("#modalText").text(e.complete?"Save":"Error"),$("#modalDialog").modal("show")}})}),$("#butCV_path").on("click",function(a){t($(this),a)}),$("#butPhoto_path").on("click",function(a){t($(this),a)}),$("#formContact").on("submit",function(t){t.preventDefault();var a=$(this);$.ajax({url:a.attr("action"),type:a.attr("method"),data:a.serialize(),success:function(t){var e=$.parseJSON(t);null!==e.html&&a[0].reset(),$("#modalError").html(e.html),$("#modalText").text(e.complete?"Save":"Error"),$("#modalDialog").modal("show")}})}),$.fn.editable.defaults.mode="inline",$.fn.editable.defaults.highlight="#5BC0DE",$.fn.editableform.buttons='<button type="submit" class="editable-submit btn btn-primary"><i class="fa fa-check"></i></button><button type="button" class="editable-cancel btn btn-outline-primary"><i class="fa fa-remove"></i></button>&nbsp',n(),$(".education-ediatble").on("save",function(t,a){$(this).closest("tr").find("td:eq(7)").text(a.response)}),$(".education-ediatble-add-req").editable({validate:a}),$(".education-ediatble-add-not-req").editable({validate:o}),$(".education-ediatble-add-date-req").editable({validate:e}),$(".education-ediatble-add-date-not-req").editable({validate:d}),$("#butAddEducation").on("click",function(){var t=$(this).attr("data-ajax");$(".education-ediatble-add").editable("submit",{url:t,success:function(t,a){$(".education-ediatble-add").editable("setValue",""),data=$.parseJSON(t);var e=$("#tabEducation tbody tr:first").clone();e.addClass("table-info"),e.find("td:eq(0)").text(data.id),e.find("td:eq(1) a").attr("data-pk",data.id),e.find("td:eq(1) a").text(data.institute),e.find("td:eq(2) a").attr("data-pk",data.id),e.find("td:eq(2) a").text(data.title),e.find("td:eq(3) a").attr("data-pk",data.id),e.find("td:eq(3) a").text(data.speciality),e.find("td:eq(4) a").attr("data-pk",data.id),e.find("td:eq(4) a").text(data.specialization),e.find("td:eq(5) a").attr("data-pk",data.id),e.find("td:eq(5) a").text(data.start),e.find("td:eq(6) a").attr("data-pk",data.id),e.find("td:eq(6) a").text(data.stop),e.find("td:eq(7)").text(data.dateChange),e.find("button").on("click",function(t){i($(this))}),e.css("display",""),$("#tabEducation").append(e),n()},error:function(t){t&&t.responseText&&$("#modalError").html(t.responseText),$("#modalText").text("Error"),$("#modalDialog").modal("show")}})}),$("#tabEducation button[data-url]").on("click",function(t){i($(this))}),l(),$(".work-ediatble").on("save",function(t,a){$(this).closest("tr").find("td:eq(5)").text(a.response)}),$(".work-ediatble-add-req").editable({validate:a}),$(".work-ediatble-add-date-req").editable({validate:e}),$(".work-ediatble-add-date-not-req").editable({validate:d}),$("#butAddWork").on("click",function(){var t=$(this).attr("data-ajax");$(".work-ediatble-add").editable("submit",{url:t,success:function(t,a){$(".work-ediatble-add").editable("setValue",""),data=$.parseJSON(t);var e=$("#tabWork tbody tr:first").clone();e.addClass("table-info"),e.find("td:eq(0)").text(data.id),e.find("td:eq(1) a").attr("data-pk",data.id),e.find("td:eq(1) a").text(data.organisation),e.find("td:eq(2) a").attr("data-pk",data.id),e.find("td:eq(2) a").text(data.position),e.find("td:eq(3) a").attr("data-pk",data.id),e.find("td:eq(3) a").text(data.start),e.find("td:eq(4) a").attr("data-pk",data.id),e.find("td:eq(4) a").text(data.stop),e.find("td:eq(5)").text(data.dateChange),e.find("button").on("click",function(t){i($(this))}),e.css("display",""),$("#tabWork").append(e),l()},error:function(t){t&&t.responseText&&$("#modalError").html(t.responseText),$("#modalText").text("Error"),$("#modalDialog").modal("show")}})}),$("#tabWork button[data-url]").on("click",function(t){i($(this))}),r(),$(".skill-ediatble").on("save",function(t,a){$(this).closest("tr").find("td:eq(4)").text(a.response)}),$(".skill-ediatble-add").editable({validate:a}),$("#butAddSkill").on("click",function(){var t=$(this).attr("data-ajax");$(".skill-ediatble-add").editable("submit",{url:t,success:function(t,a){$(".skill-ediatble-add").editable("setValue",""),data=$.parseJSON(t);var e=$("#tabSkill tbody tr:first").clone();e.addClass("table-info"),e.find("td:eq(0)").text(data.id),e.find("td:eq(1) a").attr("data-pk",data.id),e.find("td:eq(1) a").text(data.type),e.find("td:eq(2) a").attr("data-pk",data.id),e.find("td:eq(2) a").text(data.name),e.find("td:eq(3) a").attr("data-pk",data.id),e.find("td:eq(3) a").text(data.level),e.find("td:eq(4)").text(data.dateChange),e.find("button").on("click",function(t){i($(this))}),e.css("display",""),$("#tabSkill").append(e),r()},error:function(t){t&&t.responseText&&$("#modalError").html(t.responseText),$("#modalText").text("Error"),$("#modalDialog").modal("show")}})}),$("#tabSkill button[data-url]").on("click",function(t){i($(this))}),s(),$(".language-ediatble").on("save",function(t,a){$(this).closest("tr").find("td:eq(3)").text(a.response)}),$(".language-ediatble-add").editable({validate:a}),$("#butAddLanguage").on("click",function(){var t=$(this).attr("data-ajax");$(".language-ediatble-add").editable("submit",{url:t,success:function(t,a){$(".language-ediatble-add").editable("setValue",""),data=$.parseJSON(t);var e=$("#tabLanguage tbody tr:first").clone();e.addClass("table-info"),e.find("td:eq(0)").text(data.id),e.find("td:eq(1) a").attr("data-pk",data.id),e.find("td:eq(1) a").text(data.name),e.find("td:eq(2) a").attr("data-pk",data.id),e.find("td:eq(2) a").text(data.level),e.find("td:eq(3)").text(data.dateChange),e.find("button").on("click",function(t){i($(this))}),e.css("display",""),$("#tabLanguage").append(e),s()},error:function(t){t&&t.responseText&&$("#modalError").html(t.responseText),$("#modalText").text("Error"),$("#modalDialog").modal("show")}})}),$("#tabLanguage button[data-url]").on("click",function(t){i($(this))})});